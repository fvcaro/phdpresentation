	\begin{tikzpicture}[x=4cm,y=2cm,decoration={markings,% switch on markings mark=% actually add a mark
     	mark=at position 0 with{\draw (0pt,-2pt) -- (0pt,2pt);},
     	mark=at position 1 with{\draw (0pt,-2pt) -- (0pt,2pt);},
	}
	]
	\node(origin1) at (0,1) {};
	\node(origin2) at (1,1) {};
	\node(origin3) at (2,1) {};

	\node(father1) at (0,0) {};
	\node(father2) at (0.25,0) {};
	\node(father3) at (0.5,0) {};
\node(father4) at (0.75,0) {};
\node(father5) at (1,0) {};
\node(father6) at (1.25,0) {};
\node(father7) at (1.5,0) {};
\node(father8) at (1.75,0) {};
\node(father9) at (2,0) {};
\node(father10) at (2.25,0) {};
\node(father11) at (2.5,0) {};
\node(father12) at (2.75,0) {};
\node(father13) at (3,0) {};

\node(son1) at (0,-1) {};
\node(son1a) at (0.125,-1) {};
\node(son1b) at (0.25,-1) {};
\node(son1c) at (0.375,-1) {};
\node(son2)  at (0.5,-1) {};
\node(son3)  at (0.75,-1) {};
\node(son4)  at (1,-1) {};
\node(son10)  at (2,-1) {};
\node(son11) at (2.25,-1) {};
\node(son12) at (2.5,-1) {};
\node(son13) at (2.75,-1) {};
\node(son14) at (3,-1) {};

\node(grandson1) at (0,-2) {};
\node(grandson2)  at (0.25,-2) {};
\node(grandson3)  at (0.5,-2) {};
\node(grandson4)  at (0.625,-2) {};
\node(grandson5)  at (0.75,-2) {};
\node(grandson6)  at (0.875,-2) {};
\node(grandson7)  at (1,-2) {};
\node(grandson8)  at (1.25,-2) {};

\node(ggson1) at (0,-3) {};
\node(ggson2)  at (0.25,-3) {};
\node(ggson3)  at (0.5,-3) {};
\node(ggson4)  at (0.625,-3) {};
\node(ggson5)  at (0.75,-3) {};
\node(ggson6)  at (0.875,-3) {};
\node(ggson7)  at (1,-3) {};
\node(ggson8)  at (1.25,-3) {};


\node(basis0_0) at ($(father1)+(0,0.5)$){};
\node(basis0_1) at ($(father5)+(0,0.5)$){};
\node(basis0_2) at ($(father9)+(0,0.5)$){};
\node(basis0_3) at ($(father13)+(0,0.5)$){};
\node(basis1_1) at ($(son2)+(0,0.5)$){};
\node(basis1_2) at ($(son11)+(0,0.5)$){};
\node(basis1_3) at ($(son12)+(0,0.5)$){};
\node(basis1_4) at ($(son13)+(0,0.5)$){};
\node(basis2_1) at ($(grandson5)+(0,0.5)$){};
\node(basis2_2) at ($(grandson8)+(0,0.5)$){};
\node(basis2_3) at ($(grandson4)+(0,0.25)$){};
\node(basis2_4) at ($(grandson6)+(0,0.25)$){};
\node(basis3_1) at ($(ggson5)+(0,0.5)$){};
\node(basis3_2) at ($(ggson8)+(0,0.5)$){};
\node(basis3_3) at ($(ggson4)+(0,0.5)$){};
\node(basis3_4) at ($(ggson6)+(0,0.5)$){};


%%%%%% HORIZONTAL LINES
% level 1
\draw [postaction={decorate}] (father1.center) -- (father5.center) node[pos=0.5](elemfather1){};
\draw [postaction={decorate}] (father5.center) -- (father9.center) node[pos=0.5](elemfather2){};
\draw [postaction={decorate}] (father9.center) -- (father13.center) node[pos=0.5](elemfather3){};

% level 2

\draw [postaction={decorate,red}] (son1.center) -- (son2.center) node[pos=0.5](elemson1){};
\draw [postaction={decorate}] (son2.center) -- (son4.center) node[pos=0.5](elemson2){};

\draw [postaction={decorate,red}] (son10.center) -- (son12.center) node[pos=0.5](elemson31){};
\draw [postaction={decorate}] (son12.center) -- (son14.center) node[pos=0.5](elemson4){};

% level 2
\draw [postaction={decorate}] (grandson3.center) -- (grandson5.center) node[pos=0.5](elemgrandson1){};
\draw [postaction={decorate}] (grandson5.center) -- (grandson7.center) node[pos=0.5](elemgrandson2){};

% k3
%\draw [postaction={decorate}] (ggson3.center) -- (ggson5.center) node[pos=0.5](elemggson1){};
%\draw [postaction={decorate}] (ggson5.center) -- (ggson7.center) node[pos=0.5](elemggson2){};

%%%%%%%%% BOTTOM LINE %%%%%%%%%

\node(gggson1) at (0,-2.5) {};
\node(gggson2)  at (0.125,-2.5) {};
\node(gggson3)  at (0.25,-2.5) {};
\node(gggson4)  at (0.375,-2.5) {};
\node(gggson5)  at (0.5,-2.5) {};
\node(gggson6)  at (0.625,-2.5) {};
\node(gggson7)  at (0.75,-2.5) {};
\node(gggson8a)  at (0.8125,-2.5) {};
\node(gggson8)  at (0.875,-2.5) {};
\node(gggson8b)  at (0.9325,-2.5) {};
\node(gggson9)  at (1,-2.5) {};
\node(gggson10)  at (1.125,-2.5) {};
\node(gggson11)  at (1.25,-2.5) {};
\node(gggson12)  at (1.375,-2.5) {};
\node(gggson13)  at (1.5,-2.5) {};
\node(gggson14)  at (1.625,-2.5) {};
\node(gggson15)  at (1.75,-2.5) {};
\node(gggson16)  at (1.875,-2.5) {};
\node(gggson17)  at (2,-2.5) {};
\node(gggson18)  at (2.125,-2.5) {};
\node(gggson19)  at (2.25,-2.5) {};
\node(gggson20)  at (2.375,-2.5) {};
\node(gggson21)  at (2.5,-2.5) {};
\node(gggson22)  at (2.625,-2.5) {};
\node(gggson23)  at (2.75,-2.5) {};
\node(gggson24)  at (2.875,-2.5) {};
\node(gggson25)  at (3,-2.5) {};

\draw [|-] (gggson1.center) -- (gggson5.center) node[pos=0.5](){};
\draw [|-] (gggson5.center) -- (gggson7.center) node[pos=0.5](){};
\draw [|-] (gggson7.center) -- (gggson9.center) node[pos=0.5](){};
\draw [|-] (gggson9.center) -- (gggson17.center) node[pos=0.5](){};
\draw [|-] (gggson17.center) -- (gggson21.center) node[pos=0.5](){};
\draw [|-|] (gggson21.center) -- (gggson25.center) node[pos=0.5](){};


%%%%%%%%% VERTICAL LINES %%%%%%%%%

% From level 0
\draw[dotted] (father1.center) -- (gggson1.center);
\draw[dotted] (father5.center) -- (gggson9.center);
\draw[dotted] (father9.center) -- (gggson17.center);
\draw[dotted] (father13.center) -- (gggson25.center);

%\draw[loosely dotted,very thin] (father6.center) -- (gggson11.center);
%\draw[loosely dotted,very thin] (father7.center) -- (gggson13.center);
%\draw[loosely dotted,very thin] (father8.center) -- (gggson15.center);
%\draw[loosely dotted,very thin] (father11.center) -- (gggson21.center);

% From level 1
\draw[loosely dotted] (son2.center) -- (gggson5.center);
%\draw[loosely dotted] (son4.center) -- (gggson9.center);

%\draw[loosely dotted, very thin] (son1a.center) -- (gggson2.center);
%\draw[loosely dotted, very thin] (son1b.center) -- (gggson3.center);
%\draw[loosely dotted, very thin] (son1c.center) -- (gggson4.center);
%\draw[loosely dotted, very thin] (son11.center) -- (gggson19.center);
\draw[loosely dotted, very thin] (son12.center) -- (gggson21.center);
%\draw[loosely dotted, very thin] (son13.center) -- (gggson23.center);


% From level 2
\draw[loosely dotted] (grandson5.center) -- (gggson7.center);

%\draw[loosely dotted, very thin] (ggson4.center) -- (gggson6.center);
%\draw[loosely dotted, very thin] (ggson6.center) -- (gggson6.center);
%\draw[loosely dotted, very thin] (ggson6.center) -- (gggson8.center);

%\node at (gggson1)  {\Cross};
%\node at (gggson2)  {\Cross};
%\node at (gggson3)  {\Cross};
%\node at (gggson4)  {\Cross};
%\node at (gggson5)  {\Cross};
%\node at (gggson6)  {\Cross};
%\node at (gggson7)  {\Cross};
%\node at (gggson8a)  {\Cross};
%\node at (gggson8)  {\Cross};
%\node at (gggson8b)  {\Cross};
%\node at (gggson9)  {\Cross};
%\node at (gggson11)  {\Cross};
%\node at (gggson13)  {\Cross};
%\node at (gggson15)  {\Cross};
%\node at (gggson17)  {\Cross};
%%\node at (gggson19)  {\Cross};
%\node at (gggson21)  {\Cross};
%%\node at (gggson23)  {\Cross};
%\node at (gggson25)  {\Cross};

%%%%%%%%% BASIS FUNCTIONS %%%%%%%%%
%%%%%% level 0

% linear basis function

\draw[color=black, thick] (basis0_0.center) -- (father5.center);
\draw[color=black, thick] (father1.center) -- (basis0_1.center) -- (father9.center);
\draw[color=black, thick] (father5.center) -- (basis0_2.center) -- (father13.center);
\draw[color=black, thick] (basis0_3.center) -- (father9.center);

% degree 2 basis function
\draw[color=black, thick]    (father5.center) .. controls ($(elemfather2)+(-0.05,+0.15)$) and ($(elemfather2)+(0.05,0.15)$) ..  (father9.center) ;
%\draw[color=black, thick]    (father9.center) .. controls ($(elemfather3)+(-0.05,+0.15)$) and ($(elemfather3)+(0.05,0.15)$) ..  (father13.center) ;

% degree 3 basis function
\draw[color=blue, ultra thick]   (father5.center) .. controls ($(elemfather2)+(-0.01,-0.25)$) and ($(elemfather2)+(0.00,0.25)$) ..  (father9.center);

%%%%% level 1
% linear basis function
\draw[color=black, thick] (son1.center) -- (basis1_1.center) -- (son4.center);
\draw[color=blue, ultra thick] (son10.center) -- (basis1_3.center) -- (son14.center);
%\draw[color=red, thick] (son10.center) -- (basis1_2.center) -- (son12.center);
%\draw[color=red, thick] (son12.center) -- (basis1_4.center) -- (son14.center);

% degree 2 basis function
\draw[color=black, thick]    (son1.center) .. controls ($(elemson1)+(-0.05,+0.15)$) and ($(elemson1)+(0.05,0.15)$) ..  (son2.center);

% degree 3 basis function
\draw[color=blue, ultra thick]   (son1.center) .. controls ($(elemson1)+(-0.0,-0.25)$) and ($(elemson1)+(0.0,0.25)$) ..  (son2.center);


%%%%% level 2

% linear basis function
\draw[color=black, thick] (grandson3.center) -- (basis2_1.center) -- (grandson7.center);
%\draw[color=red, thick]    (grandson3.center) -- (basis2_3.center) -- (grandson5.center);
%\draw[color=red, thick]    (grandson5.center) -- (basis2_4.center) -- (grandson7.center);

% degree 2 basis function
\draw[color=blue, ultra thick]    (grandson3.center) .. controls ($(elemgrandson1)+(-0.05,+0.15)$) and ($(elemgrandson1)+(0.05,0.15)$) ..  (grandson5.center);
\draw[color=black, thick]    (grandson5.center) .. controls ($(elemgrandson2)+(-0.05,+0.15)$) and ($(elemgrandson2)+(0.05,0.15)$) ..  (grandson7.center);

% degree 3 basis function
\draw[color=blue, ultra thick]   (grandson5.center) .. controls ($(elemgrandson2)+(-0.0,-0.25)$) and ($(elemgrandson2)+(0.0,0.25)$) ..  (grandson7.center);


%%%%% k3

% linear basis function
%\draw[color=red, thick]    (ggson3.center) -- (basis3_3.center) -- (ggson5.center);
%\draw[color=red, thick]    (ggson5.center) -- (basis3_4.center) -- (ggson7.center);

%%%%%%%%% CIRCLES %%%%%%%%%

%%%%%% level 0

\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father1)+(0,0)$){};
%\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(father1a)+(0,0)$){};
%\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(father1b)+(0,0)$){};
\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father5)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father6)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father7)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father8)+(0,0)$){};
\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father9)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father11)+(0,0)$){};
\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(father13)+(0,0)$){};

%%%%%% level 1

\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(son1)+(0,0)$){};

%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son1a)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son1b)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son1c)+(0,0)$){};
\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son2)+(0,0)$){};
\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(son4)+(0,0)$){};
\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(son10)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son11)+(0,0)$){};
\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son12)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(son13)+(0,0)$){};
\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(son14)+(0,0)$){};

%%%%%% level 2
\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(grandson3)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(grandson4)+(0,0)$){};
\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(grandson5)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(grandson6)+(0,0)$){};
\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(grandson7)+(0,0)$){};

%%%%%% level 2
%\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(ggson3)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(ggson4)+(0,0)$){};
%\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(ggson5)+(0,0)$){};
%\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at ($(ggson6)+(0,0)$){};
%\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at ($(ggson7)+(0,0)$){};

%%%%%%%%%%% LEGEND

%\draw[blue, very thick] at (origin) rectangle (3,2);
%\node[rectangle,draw] at (origin1) {};

\node[circle,draw, fill=white, inner sep=0pt,minimum size=5pt] at (origin1){};
\node at ($(origin1) +(0.35,0.01)$)  {Dirichlet nodes};

\node[circle,draw, fill=black, inner sep=0pt,minimum size=5pt] at (origin2){};
\node at ($(origin2) +(0.3,0.01)$)  {Active nodes};

\node[rectangle, inner sep=0pt, minimum height=1pt, minimum width=6pt, draw=blue, fill=blue] at (origin3)  {};
%\node at (origin3)  {\Cross};
\node at ($(origin3) +(0.4,0)$)  {Basis functions};

%%%%%%%%%%%  TEXT

%%%% left  %%%%

%\node[anchor=west] at ($(father1)-(0.9,0)$) {level 0 (base)};
%\node[anchor=west] at ($(son1)-(0.75,0)$) {level 1};
%\node[anchor=west] at ($(grandson1)-(0.75,0)$) {level 2};
%\node[anchor=west] at ($(ggson1)-(0.75,0)$) {level 3};
%\node[anchor=west] at ($(gggson1)-(0.9,0)$) {Overlapped mesh};

%%%% bottom  %%%%

\node at ($(gggson3) +(0,-0.2)$)  {$p=3$};
\node at ($(gggson6) +(0,-0.2)$)  {$p=2$};
\node at ($(gggson8) +(0,-0.2)$)  {$p=3$};
\node at ($(gggson13) +(0,-0.2)$)  {$p=3$};
\node at ($(gggson19) +(0,-0.2)$)  {$p=1$};
\node at ($(gggson23) +(0,-0.2)$)  {$p=1$};



\end{tikzpicture}